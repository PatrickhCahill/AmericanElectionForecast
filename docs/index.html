---
layout: home_page
title: "index"
---
<style>
    .btn-selected {background-color: grey;}
</style>
<style>
    #hoverbar {
        position: fixed;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-family: Arial, sans-serif;
        /* font-size: 20em; */
        display: none;
        pointer-events: none; /* Prevents hoverbar from interfering with mouse events */
    }
</style>
<div id="hoverbar"></div>

<!-- <section style="width:30%; margin:0 auto; height:500px; justify-content: end;">
    <div style="margin: auto auto; max-width: 450px; height: 100%; width:100%" >

        <object class id="us_cartogram" type="image/svg+xml" data={{"/assets/noinkscape_updated.svg" | relative_url}} height="100%" width="100%"></object>
    </div>
</section> -->


<script src="https://d3js.org/d3.v7.min.js"></script>

<!-- <script>
    document.addEventListener("DOMContentLoaded", function() {
        // Select the SVG element after it has loaded
        d3.select("#us_cartogram").on("load", function() {
            // Access the SVG document
            const svgDoc = d3.select(this).node().contentDocument;

            // Select the element with id 'ca22' and change its color to blue
            d3.select(svgDoc.getElementById("ca-22"))
                .style("fill", "blue");

            // Select all paths in the SVG
            const allPaths = d3.select(svgDoc).selectAll("path");

            // Get the hoverbar element
            const hoverbar = d3.select("#hoverbar");

            // Apply a hover effect to all paths
            allPaths.on("mouseover", function (event) {
                // Make all paths more transparent except the hovered one
                allPaths.style("opacity", 0.3);
                d3.select(this).style("opacity", 1);

                // Get the bounding box of the hovered element
                const bbox = this.getBBox();

                // Update and show the hoverbar with the ID of the hovered element
                hoverbar
                    .style("display", "block")
                    .text(this.id)
                    .style("left", (bbox.x + bbox.width + 10) + "px") // Place hover bar to the right of the element
                    .style("top", (bbox.y + (bbox.height) - 10) + "px"); // Vertically center it relative to the element
            }).on("mouseout", function () {
                // Reset the opacity of all paths
                allPaths.style("opacity", 1);

                // Hide the hoverbar
                hoverbar.style("display", "none");
            });


        
            });
    });
</script> -->


<section style="width:65%; margin:0 auto; min-width: min(700px, 95vw); box-sizing: border-box;">
    <div style="height: 40em;">
        <div class="text-center h4 strong">How the race breaks down in each state</div>
        <p class="text-center small"> Hover over each for the probability that Trump or Harris will win it. Each state
            will deliver one of the candidates their electoral votes. The one who receives 270 wins the election.</p>
        <iframe src="assets/chloropleth.html" title="Election Polls" style="width:100%; height:80%;"></iframe>
        <!-- <div style="width:inherit; margin: 0 auto;">
        <div class="chloro_text_container">
            <div class="left">
                <i><b><span class="name harris">Harris</span>
                        <span class="number"> wins {{ site.data.facts.harris_prob }} out of 100 </i></b> </span>
            </div>
            <div class="right">
                <i><b><span class="name trump">Trump</span>
                        <span class="number"> wins {{ site.data.facts.trump_prob }} out of 100 </i></b> </span>
            </div>
        </div>
    </div> -->

    </div>

    <table style="width: 60%; margin: 0 auto;min-width: min(600px, 95vw)">
        <thead>
            <tr >
                <th class="bottom-border">Electoral college</th>
                <th class="bottom-border">Popular vote</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="bottom-border">
                    <span class="color-cell" style="background-color: red;"></span> Donald Trump <span
                        class="value">{{ site.data.facts_other[0].trump_mean_ev | round }}</span>
                </td>
                <td class="bottom-border">
                    <span class="color-cell" style="background-color: red;"></span> Donald Trump <span
                        class="value">{{ site.data.facts_other[0].trump_mean_popular_vote |times: 100 | round: 1}}%</span>
                </td>
            </tr>
            <tr>
                <td class="bottom-border">
                    <span class="color-cell" style="background-color: blue;"></span> Kamala Harris <span
                        class="value">{{ site.data.facts_other[0].harris_mean_ev | round }}</span>
                </td>
                <td class="bottom-border">
                    <span class="color-cell" style="background-color: blue;"></span> Kamala Harris <span
                        class="value">{{ site.data.facts_other[0].harris_mean_popular_vote |times: 100 | round: 1}}%</span>
                </td>
            </tr>
            <tr>
                <td>
                    <span class="color-cell" style="background-color: grey;"></span>Other <span class="value">0</span>
                </td>
                <td>
                    <span class="color-cell" style="background-color: grey;"></span>Other <span class="value">{{ site.data.facts_other[0].other_mean_popular_vote |times: 100 | round: 1}}%</span>
                </td>
            </tr>
        </tbody>
    </table>
</section>


{% include learn-more.html %}


<section style="width:65%; margin:0 auto; min-width: min(700px, 95vw); box-sizing: border-box;">
    <div style="height: 40em;" class="text-center">
        <div class="btn-group-1" style="margin: 0 auto;">
            <button id="win_ev_pv_1" class="btn btn-selected">Chance of winning</button>
            <button id="win_ev_pv_2" class="btn">Electoral Votes</button>
            <button id="win_ev_pv_3" class="btn">Popular Vote</button>
        </div>
        <iframe id="win_ev_pv" src="assets/win_probs.html"  title="Election Polls" style="width:80%; height:80%;"></iframe>

    </div>

</section>

<section style="width:65%; margin:0 auto; min-width: min(700px, 95vw); box-sizing: border-box;">
    <div style="height: 40em;" class="text-center">
        <div class="btn-group-2" style="margin: 0 auto;">
            <button id="ev_gap_1" class="btn btn-selected">Popular Vote Chances</button>
            <button id="ev_gap_2" class="btn">Electoral College Gap</button>
            <button id="ev_gap_3" class="btn">Mismatch chances</button>
        </div>
        <iframe id="ev_gap" src="assets/popular_probs.html"  title="Election Polls" style="width:80%; height:80%;"></iframe>

    </div>

</section>

<section class="bg-primary" id="about">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 text-center">
                <h2 class="section-heading">Getting into the nitty-gritty!</h2>
                <hr class="light">
                <p class="text-faded">The uncertainty in our forecast will decrease as we get to election day, all else being equal. If the polls get closer the election result will become less clear, if the margin for one candidate or another grows - the chance they win will increase. You can explore all the possibilities by looking at the histogram below.</p>
                <!-- <a href="/how-it-works.html" class="btn btn-default btn-xl">Learn more!</a> -->
            </div>
        </div>
    </div>
</section>
<section style="width:65%; margin:0 auto; min-width: min(700px, 95vw); box-sizing: border-box;">
    <div style="height: 40em;">
        <div class="text-center h4 strong">95% of our simulations have Harris winning between {{ site.data.facts_other[0].harris_mean_ev_lower | round }} and {{ site.data.facts_other[0].harris_mean_ev_upper | round }} </div>
        <p class="text-center small"> Hover over each electoral vote margin to find the probability of that result.</p>
        <iframe src="assets/histogram.html" title="Election Polls" style="width:100%; height:80%;"></iframe>
    </div>
    <div style="height: 40em;">
        <div class="text-center h4 strong">What matters is the electoral college, but polls measure that national (or state) vote </div>
        <p class="text-center small">It's possible to win the popular vote but lose the electoral vote. This plot shows a collection of 1000 simulations. The greyed out values show were one candidate won the electoral college but the other won the popular vote. The <a href="#ev_gap">chance of this</a> outcome occuring has grown since Kamala Harris entered the race.</p>
        <iframe src="assets/ev_vote.html" title="Election Polls" style="width:100%; height:80%;"></iframe>
    </div>

</section>

